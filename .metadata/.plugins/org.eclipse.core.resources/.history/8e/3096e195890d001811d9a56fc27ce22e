import ag.protocol.Frame;
import ag.protocol.FrameMarshaller;
import ag.protocol.FrameUnmarshaller;
import ag.protocol.impl.FrameMarshallerImpl;
import ag.protocol.impl.FrameUnmarshallerImpl;
import ag.protocol.util.Util;

public class FrameTest {

	public static void main(String[] args) {
		//
		Frame frame = new Frame();
		frame.setPayload("HELO".getBytes());
		//
		Util.byteArrayToHexString(frame.getPayload());
		//
		System.out.println("-------- FRAME ----------");
		System.out.println("IsReq:    \t" + frame.isRequest());
		System.out.println("IsText:   \t" + frame.isText());
		System.out.println("Length:   \t" + frame.getLength());
		System.out.println("Content:  \t" + new String(frame.getPayload()));
		//
		FrameMarshaller marshaller = new FrameMarshallerImpl();
		FrameUnmarshaller unmarshaller = new FrameUnmarshallerImpl();
		//
		byte[] serialized = marshaller.marshal(frame);
		//
		Frame result = unmarshaller.unmarshal(serialized);
		//
		System.out.println("-------- RESULT ----------");
		System.out.println("IsReq:    \t" + result.isRequest());
		System.out.println("IsText:   \t" + result.isText());
		System.out.println("Length:   \t" + result.getLength());
		System.out.println("Content:  \t" + new String(result.getPayload()));
	}
}
