package ifpb;

import java.sql.Connection;
import java.sql.SQLException;

public class App {
	public static void main(String[] args) throws SQLException {
		//
		final PgAppender appender = new PgAppender();
		Thread t1 = new Thread(){
			public void run() {
				try {
					Connection conn = appender.connect();
					//execução SINCRONA (em 29431ms)
					long t0 = System.currentTimeMillis();
					appender.insert(conn, 1, "Eu");
					long t1 = System.currentTimeMillis();
					//.................
					System.out.println(t1 - t0);
				} catch(SQLException e){
					Thread.setDefaultUncaughtExceptionHandler(new UncaughtExceptionHandler() {
						public void uncaughtException(Thread t, Throwable e) {
							e.printStackTrace();
						}
					});
				}
			};
		};
		//
		Thread t2 = new Thread(){
			public void run() {
				try {
					Connection conn = appender.connect();
					//execução SINCRONA (em 29431ms)
					long t0 = System.currentTimeMillis();
					appender.insert(conn, 500001, "Eu");
					long t1 = System.currentTimeMillis();
					//.................
					System.out.println(t1 - t0);
				} catch(SQLException e){
					Thread.setDefaultUncaughtExceptionHandler(new UncaughtExceptionHandler() {
						public void uncaughtException(Thread t, Throwable e) {
							e.printStackTrace();
						}
					});
				}
			};
		};
		//
		t1.start();
		t2.start();
	}
}
